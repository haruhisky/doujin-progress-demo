# 同人わんたっぷ: Project Context & Rules

## 1. プロダクトビジョン

### コンセプト
同人誌・漫画制作に特化したプロジェクト管理アプリ。
シールを貼るように、スタンプを押すように、今日の進捗をタップするだけ。
それだけで締切までの見通しが自動的に見える。

### ターゲットユーザー
- **同人活動を行う成人女性**
- デザインはビジネス的な固さではなく、落ち着いた柔らかい雰囲気

### コア体験
1. アプリを開く → 「今日の進捗入力」画面がすぐ表示される
2. 工程ごとに色分けされたシールが並んでいる
3. ネームが5ページ進んだら、ネームのシールを5回タップ → 画面に5個のシールが貼られる
4. 同時並行OK（下書き3ページ + ペン入れ2ページなど、別色シールが混在）
5. ガントチャートがリアルタイムに更新される（アニメーション付き）
6. 進捗が進めば想定完了日が前倒しになり、スケジュールに余裕ができるのが見える

### ペース計算ロジック
- 開始日からシール貼りまでの実績から「1タスクあたりの所要日数」を算出
- 例: 1日目に4個シール → 1タスク = 0.25日 → 残りタスク数 × 0.25日 = 想定残日数
- 工程ごとに独立してペースを計算（ネームとペン入れでは速度が違う）
- **経過日数ベース**で計算（休みの日も含めた平均ペース = 実効ペース）
- データが蓄積されるほど予測精度が上がる

### 設計方針の転換（2026-02-26 決定）
**旧**: フォルダ監視（ファイルを書き出すだけで進捗記録）
**新**: シール式（チェックをつけるだけで進捗記録）

転換の理由:
- 「書き出してフォルダに入れる」も「チェックをつける」も手間は大差ない
- フォルダ監視はファイル形式・フォルダ構造・OSへの依存を生む
- シール式ならプラットフォーム非依存（PC / スマホ / タブレット）
- アプリの仕様が一貫し、フォルダ作成・管理の複雑さがなくなる

### 休日設定の廃止（2026-02-27 決定）
**旧**: 休日（作業できない日）をカレンダーで設定し、ペース計算から除外
**新**: 休日設定なし。経過日数ベースでペースを計算

廃止の理由:
- 「できた分だけタップ」= 事後記録型がコンセプト。事前に「やらない日」を決めるのはコンセプトに合わない
- 同人作家の実態: 予定通りに休む/作業するとは限らない
- 経過日数ベースの方が「あと何日で終わるか」の見通しに直結する（休みの頻度込みの実効ペース）

### タスクの3分類（2026-02-27 決定）

| 種別 | 説明 | 表示場所 | 例 |
|---|---|---|---|
| **継起タスク** | 順序と締切がある工程。消化すると消える | ホーム + ガントチャート + カレンダー | ネーム、下書き、ペン入れ、仕上げ |
| **デイリータスク** | 毎日繰り返すタスク。1日あたりの回数を設定 | ホーム + カレンダー | 服薬3回、ストレッチ、毎日の練習 |
| **イベントタスク** | 特定の日に発生する単発タスク | ホーム（当日のみ） + カレンダー | 申込締切、ポスター発注、打ち合わせ |

**設計原則**: デイリー/イベントタスクはガントチャートに一切影響しない。ガントチャートは継起タスク専用。

**設定導線**:
- デイリータスク → 設定画面から登録
- イベントタスク → カレンダーの日付タップから登録（設定からも可）

### 価値の構成
1. **シール式チェック**（入力装置）: ページ完了をワンタップで記録
2. **ガントチャート + ペース予測**（価値の核心）: 希望 vs 現実の可視化
3. **Work Mateログ連携**（実作業データの補強、PC版のみ、後回し）: 本当の作業ペースがわかる
4. **AI分析**（価値の出力装置、オプション、後回し）: 現実的な締切予測と提言を返す

## 2. 画面構成

### ナビゲーション
どの画面からでも全画面に移動できるグローバルナビゲーション。
ヘッダーにプロジェクト名を表示し、タップでドロップダウン切替。

| 画面 | 役割 | 備考 |
|---|---|---|
| **今日の進捗**（ホーム） | シール貼り。アプリを開いたら最初にここ | 選択中プロジェクト |
| **ガントチャート** | 計画 vs 想定の可視化 | 選択中プロジェクトのみ表示 |
| **カレンダー** | 日別の進捗履歴 + 全プロジェクト俯瞰 | 月表示 |
| **設定** | プロジェクト管理・タスク設定等 | |

**プロジェクト管理は設定画面に統合**（専用画面を持たない）。

### 今日の進捗（ホーム画面）
- 開いた瞬間に入力できる状態
- 3種のタスクがすべてタップ可能な状態で並ぶ:
  - **継起タスク**: 工程ごとに色分けされたシールボタン（従来通り）
  - **デイリータスク**: あらかじめ設定した回数分の空白枠を表示、タップで埋める
  - **イベントタスク**: 当日分のみ表示、タップで達成
- タップするたびにシールが画面に追加される（心地よいアニメーション）
- 画面上部に各工程の進捗サマリー（ネーム 7/16 等）
- シールを貼るとガントチャートの想定ラインが動的に更新（継起タスクのみ）

### ガントチャート
- 選択中プロジェクトのみ表示
- 開始日〜締切日を横軸、工程を縦軸
- 初期状態: 工程を均等割り
- 各工程の境界をドラッグで調整可能（ネームを短くすると後工程が自動で伸びる）
- **計画バー**: ユーザーが設定した希望スケジュール（実線）
- **想定オーバーレイ**: 実績ペースから算出した完了見込み（半透明）
- 今日線・締切線
- **工程別ペース分析**: 各工程の計画日数に対する差分（超過/余裕）を表示

### カレンダー
- 月表示カレンダー
- **各日セルは十分な高さを確保**（スマホでもタップしやすく、情報を表示できる大きさ）
- 各日にシンボルシール3種を表示（マス目が埋まらないよう簡潔に）:
  - 継起タスク達成シール
  - デイリータスク達成シール
  - イベントタスク達成シール
- **プロジェクト期間マーカー**: 全プロジェクトの開始日〜締切日をプロジェクトごとに蛍光マーカー風の帯で表示。複数プロジェクトが重なる期間は帯が複数本並ぶ
- 日付タップで詳細表示（達成した内容の一覧: どの工程を何ページ、デイリー何回達成、イベント完了等）
- **日付タップからイベントタスクの新規登録が可能**

## 3. プロジェクト管理

### 設計（2026-02-27 決定）
- **専用画面なし**。設定画面に統合
- **ヘッダーにドロップダウン**: プロジェクト名をタップで切替
- **設定画面**: プロジェクトの追加・編集・削除
- **ホーム/ガントチャート**: 選択中プロジェクトのみ表示
- **カレンダー**: 全プロジェクトの期間をマーカーで俯瞰

### プロジェクトごとのデータ
- プロジェクト名
- 総ページ数
- 開始日・締切日
- 工程定義（名前・色・順序）
- 計画比率（planRatios）
- シールログ（日別・工程別の記録）
- デイリータスク定義
- イベントタスク定義

## 4. Work Mateとの関係

### 棲み分け
| アプリ | 対象 | 問い |
|---|---|---|
| **Work Mate** | 全クリエイター（絵描き、ゲーム開発者、動画制作者等） | 「今日どうだったか」（日次の作業振り返り） |
| **本アプリ** | 同人漫画家・漫画制作者 | 「締切に間に合うか」（プロジェクト進捗予測） |

### 連携方式（後回し）
- **PC版のみWork Mate連携対応**（同一のデータフォルダを参照）
- Work Mateがなくても本アプリ単独で完結する
- Work Mate側にプラグインとして載せることも検討可（クリックで立ち上げ等）
- AI分析は両アプリがそれぞれ持つ（問いが違うため）
- APIキー設定は共有可能にし、ユーザーの二重設定を避ける

## 5. AI分析機能（後回し）

Work Mateと一緒に検討する。現状のペース分析パネルで基本的な予測はカバーできている。

### 分析内容
- シール貼りの実績ペース + Work Mateの実作業時間データを照合
- 「このペースだとネーム完成は○月○日」という予測を算出
- 締切から逆算して現実的な提言を行う

### LLM対応
- OpenAI（GPT-4o）、Anthropic（Claude）、Google（Gemini）
- APIキー設定はWork Mateと共有可能

## 6. 技術構成

### 開発ロードマップ（2026-02-27 決定）

| フェーズ | 内容 | 技術 | 状態 |
|---|---|---|---|
| **Phase 0** | コンセプトデモ（HTMLプロトタイプ） | 単一HTML + JS | ✅ 完了（demo v5） |
| **Phase 1** | デモ最終版（簡易PC版） | Electron + HTML/JS + localStorage | 🔜 次にやる |
| **Phase 2** | スマホ版（本実装） | Flutter (Dart) + SQLite | 将来 |
| **Phase 3** | PC版（Flutter Desktop or Electronラップ） | 未定 | 将来 |

### Phase 1: デモ最終版（簡易PC版）
- **目的**: PCで実際に使えるアプリ。自分の同人活動で実運用する
- **技術**: Electron + 今のデモHTMLをベースにlocalStorageで永続化
- **スコープ**: 仕様変更（プロジェクト管理統合、カレンダーイベント登録等）をすべて反映
- **位置づけ**: Flutter実装の参照コードにもなる

### Phase 2: スマホ版（本実装）
- **メインプラットフォーム**: スマホ（iOS優先）
- **技術**: Flutter（Dart）
- **データ保存**: ローカルDB（SQLite等）
- **Work Mate連携・AI分析**: PC版で検討（スマホ版は単体完結）

### Phase 3: PC版
- Flutter Desktop でスマホ版と共通コードベースにするか、Electronでラップするか未定
- Work Mate連携はこのフェーズで検討

## 7. デザイン方針
- **落ち着いた、柔らかい雰囲気**（ビジネスツール感を排除）
- ターゲットが成人女性の同人作家であることを意識
- シール貼りの触り心地を大切に（アニメーション、色使い）
- 工程ごとのカラーパレット: 温かみのある色味

## 8. 強み
- シールを貼るだけで記録される（操作負荷が極めて低い）
- 希望スケジュール vs 実績ペースのギャップが視覚的にわかる
- プラットフォーム非依存（将来のマルチデバイス展開が容易）
- AIが現実的なペースを分析してくれる（Work Mateの実測データと連携）
- 「同人漫画家向け」という明確なサブセグメント
- DL同人教室（YouTubeチャンネル）のコミュニティと直結するプロダクト

## 9. 弱み・課題
- シール貼りを忘れる可能性（リマインド機能で対策）
- Work Mateがインストールされていない場合のフォールバック（AI分析の精度が下がる旨を表示）
- マルチデバイス対応時のデータ同期設計
- 他ユーザーとの進捗データ共有（サーバー通信を極力避ける方針。ニーズが見えてから設計）

## 10. プロダクト位置づけ・展開戦略

### 位置づけ
- **Work Mateが主力製品**（既に販売中）。本アプリはサブプロジェクト
- 単体での収益化は狙わない。以下の3つの価値を生む道具として位置づける:
  1. **自分の同人活動で使う**（最初のユーザー = 自分）
  2. **配信コンテンツ**（DL同人教室で使っている姿を見せる → 欲しい人に配布）
  3. **Work Mateのアドオン/連携機能**（同人漫画家層をWork Mateに取り込む導線）

### 優先順位
1. Work Mate V2（AI秘書タブ・Steam登録・Mac版）← **最優先**
2. 本アプリ Phase 1（デモ最終版 = 簡易PC版）
3. 本アプリ Phase 2（Flutter スマホ版）

### 展開ステップ
1. まず自分向けに作り、自分の同人活動で実際に使う
2. 実体験でシール式の有効性・課題を検証（紙で十分か？シール貼り忘れないか？）
3. 配信で使いながら見せる（使っている姿自体がプロモーション）
4. 欲しい人向けに無料配布
5. Work Mateアドオンとして連携機能を足す

## 11. 開発進捗 (Progress Log)

### コンセプト確定 (2026-02-26)
- フォルダ監視方式 → シール式チェック方式に転換
- ターゲット: 同人活動を行う成人女性
- 画面構成確定: ホーム(シール貼り) / ガントチャート / カレンダー / プロジェクト管理 / 設定
- ガントチャートにペース予測オーバーレイ + 工程境界ドラッグ調整
- デザイン方針: 落ち着いた柔らかい雰囲気
- プロダクト位置づけ確定: 自分用 → 配信コンテンツ → Work Mateアドオン

### 初期実装（フォルダ監視版、転換前）
- Electron + React(JSX) + TypeScript(メインプロセス)でビルド成功
- シール式への作り直しが必要（Work Mate優先のため保留）

### デモ v1〜v5 (2026-02-26〜27)
- 単一HTMLでコンセプトデモを段階的に実装
- v5で主要機能が揃う: シール貼り / ガントチャート / カレンダー / デイリー・イベントタスク / ペース分析
- GitHub Pages で公開: https://haruhisky.github.io/doujin-progress-demo/

### 実装計画の深堀り (2026-02-27)
- **休日設定を廃止**: 経過日数ベースのペース計算を維持。コンセプト「できた分だけタップ」に合致
- **プラットフォーム方針転換**: スマホ（iOS）をメインに。技術: Flutter (Dart)
- **プロジェクト管理を設定画面に統合**: ヘッダーのドロップダウンで切替。ガントは選択中のみ
- **カレンダー強化**: プロジェクト期間の蛍光マーカー表示、イベント直接登録
- **Phase 1として「デモ最終版 = 簡易PC版」をElectronで作る**（Flutter移行前の実運用ツール）
- Work Mate連携・AI分析は後回し。データ共有もニーズが見えてから
